<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: YuiTree</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">YuiTree</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/vendor/plugins/yui_tree/lib/yui_tree_rb.html">
                vendor/plugins/yui_tree/lib/yui_tree.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <table>
<tr><td valign="top">File:</td><td>yui_tree.rb

</td></tr>
<tr><td valign="top">(C):</td><td>Hipposoft 2009

</td></tr>
<tr><td valign="top">Purpose:</td><td>A Rails interface to the Yahoo Interface Library tree component, for YUI
version 2.7.0.

</td></tr>
</table>
<hr size="10"></hr><pre>
          06-Apr-2009 (ADH): Created.
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000002">included</a>&nbsp;&nbsp;
      <a href="#M000001">make_node_object</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Module <a href="YuiTree/ClassMethods.html" class="link">YuiTree::ClassMethods</a><br />
Module <a href="YuiTree/YuiTreeHelper.html" class="link">YuiTree::YuiTreeHelper</a><br />

    </div>

    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">YUI_TREE_DEFAULT_TITLE_METHOD</td>
          <td>=</td>
          <td class="context-item-value">'name'.freeze</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="#M000002" class="method-signature">
          <span class="method-name">included</span><span class="method-args">( base )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Add in the YUI tree class methods and establish the helper calls when the
module gets <a href="YuiTree.html#M000002">included</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000002-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000002-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/yui_tree/lib/yui_tree.rb, line 394</span>
394:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">included</span>( <span class="ruby-identifier">base</span> )
395:     <span class="ruby-keyword kw">if</span> ( <span class="ruby-constant">YuiTree</span>.<span class="ruby-identifier">default_options</span>.<span class="ruby-identifier">nil?</span> )
396:       <span class="ruby-identifier">config_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>( <span class="ruby-constant">RAILS_ROOT</span>, <span class="ruby-value str">'config'</span>, <span class="ruby-value str">'yui_tree.yml'</span> )
397: 
398:       <span class="ruby-keyword kw">if</span> ( <span class="ruby-constant">File</span>.<span class="ruby-identifier">readable?</span>( <span class="ruby-identifier">config_file</span> ) )
399:         <span class="ruby-constant">YuiTree</span>.<span class="ruby-identifier">default_options</span> = <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">load_file</span>( <span class="ruby-identifier">config_file</span> ).<span class="ruby-identifier">symbolize_keys</span>
400:       <span class="ruby-keyword kw">else</span>
401:         <span class="ruby-constant">YuiTree</span>.<span class="ruby-identifier">default_options</span> = {}
402:       <span class="ruby-keyword kw">end</span>
403:     <span class="ruby-keyword kw">end</span>
404: 
405:     <span class="ruby-identifier">base</span>.<span class="ruby-identifier">extend</span>( <span class="ruby-constant">ClassMethods</span>  )
406:     <span class="ruby-identifier">base</span>.<span class="ruby-identifier">helper</span>( <span class="ruby-constant">YuiTreeHelper</span> )
407:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="#M000001" class="method-signature">
          <span class="method-name">make_node_object</span><span class="method-args">( id, name, isLeaf, className = nil )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Simple helper method which builds an object suitable for rendering as JSON
and sending to the YUI tree as node data. Pass an object ID, name to show
in the tree and &#8216;true&#8217; if this is a leaf, else
&#8216;false&#8217;. Returns an appropriate Ruby object upon which
&quot;to_json&quot; may be called. Call using code such as
&quot;YuiTree::make_node_object(&#8230;)&quot;.
</p>
<p>
The text given in the second parameter is made HTML-safe with
&quot;h(&#8230;)&quot;. The output must be made JS-safe somehow, e.g. by
&quot;render :js =&gt; &lt;objects&gt;&quot; for one returned object or an
array of them in controller handling XHR requests in a &quot;format.js do
&#8230;&quot; block or by the necessity of turning the objects into a JS
equivalent by calling &quot;to_json&quot;, which handles escaping for you.
</p>
<p>
An optional fourth parameter can be given - this is used as an extra class
name on the node text. You can specialise individual node appearance with
this and CSS, but only if you make custom nodes externally. If you use the
default internal code for acts-as-tree-like data sets, no special class
name will be applied to any nodes.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000001-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000001-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/yui_tree/lib/yui_tree.rb, line 382</span>
382:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">make_node_object</span>( <span class="ruby-identifier">id</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">isLeaf</span>, <span class="ruby-identifier">className</span> = <span class="ruby-keyword kw">nil</span> )
383:     {
384:       <span class="ruby-identifier">:id</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span>,<span class="ruby-comment cmt">#id.to_i,</span>
385:       <span class="ruby-identifier">:label</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">ERB</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">h</span>( <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> ),
386:       <span class="ruby-identifier">:isLeaf</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-operator">!</span><span class="ruby-operator">!</span> <span class="ruby-identifier">isLeaf</span>,
387:       <span class="ruby-identifier">:className</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">className</span>
388:     }
389:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>