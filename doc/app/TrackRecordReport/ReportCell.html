<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>class TrackRecordReport::ReportCell - Rails Application Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/track_record_report.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="ReportElementaryCalculator.html">TrackRecordReport::ReportElementaryCalculator</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-add_user_data">#add_user_data</a>
    
    <li><a href="#method-i-calculate-21">#calculate!</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../TrackRecordReport.html">TrackRecordReport</a>
  
    <li><a href="../TrackRecordReport/Report.html">TrackRecordReport::Report</a>
  
    <li><a href="../TrackRecordReport/ReportCell.html">TrackRecordReport::ReportCell</a>
  
    <li><a href="../TrackRecordReport/ReportColumnTotal.html">TrackRecordReport::ReportColumnTotal</a>
  
    <li><a href="../TrackRecordReport/ReportElementaryCalculator.html">TrackRecordReport::ReportElementaryCalculator</a>
  
    <li><a href="../TrackRecordReport/ReportRow.html">TrackRecordReport::ReportRow</a>
  
    <li><a href="../TrackRecordReport/ReportSection.html">TrackRecordReport::ReportSection</a>
  
    <li><a href="../TrackRecordReport/ReportUserColumnTotal.html">TrackRecordReport::ReportUserColumnTotal</a>
  
    <li><a href="../TrackRecordReport/ReportUserData.html">TrackRecordReport::ReportUserData</a>
  
    <li><a href="../TrackRecordReport/ReportUserRowTotal.html">TrackRecordReport::ReportUserRowTotal</a>
  
    <li><a href="../ReportsHelper.html">ReportsHelper</a>
  
    <li><a href="../ReportsHelper/ReportMonth.html">ReportsHelper::ReportMonth</a>
  
    <li><a href="../ReportsHelper/ReportWeek.html">ReportsHelper::ReportWeek</a>
  
    <li><a href="../ReportsHelper/ReportYear.html">ReportsHelper::ReportYear</a>
  
    <li><a href="../QuietLeightbox.html">QuietLeightbox</a>
  
    <li><a href="../QuietLeightbox/ClassMethods.html">QuietLeightbox::ClassMethods</a>
  
    <li><a href="../QuietLeightbox/QuietLeightboxHelper.html">QuietLeightbox::QuietLeightboxHelper</a>
  
    <li><a href="../QuietPrototype.html">QuietPrototype</a>
  
    <li><a href="../QuietPrototype/ClassMethods.html">QuietPrototype::ClassMethods</a>
  
    <li><a href="../QuietPrototype/QuietPrototypeHelper.html">QuietPrototype::QuietPrototypeHelper</a>
  
    <li><a href="../YuiTree.html">YuiTree</a>
  
    <li><a href="../YuiTree/ClassMethods.html">YuiTree::ClassMethods</a>
  
    <li><a href="../YuiTree/YuiTreeHelper.html">YuiTree::YuiTreeHelper</a>
  
    <li><a href="../SafeInPlaceEditing.html">SafeInPlaceEditing</a>
  
    <li><a href="../SafeInPlaceEditing/ClassMethods.html">SafeInPlaceEditing::ClassMethods</a>
  
    <li><a href="../ApplicationController.html">ApplicationController</a>
  
    <li><a href="../ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="../AuditsController.html">AuditsController</a>
  
    <li><a href="../AuditsHelper.html">AuditsHelper</a>
  
    <li><a href="../ChartsController.html">ChartsController</a>
  
    <li><a href="../ChartsHelper.html">ChartsHelper</a>
  
    <li><a href="../ControlPanel.html">ControlPanel</a>
  
    <li><a href="../ControlPanelsController.html">ControlPanelsController</a>
  
    <li><a href="../Customer.html">Customer</a>
  
    <li><a href="../CustomersController.html">CustomersController</a>
  
    <li><a href="../CustomersHelper.html">CustomersHelper</a>
  
    <li><a href="../EmailNotifier.html">EmailNotifier</a>
  
    <li><a href="../HelpController.html">HelpController</a>
  
    <li><a href="../HelpHelper.html">HelpHelper</a>
  
    <li><a href="../Project.html">Project</a>
  
    <li><a href="../ProjectsController.html">ProjectsController</a>
  
    <li><a href="../ProjectsHelper.html">ProjectsHelper</a>
  
    <li><a href="../Rangeable.html">Rangeable</a>
  
    <li><a href="../ReportsController.html">ReportsController</a>
  
    <li><a href="../SafeInPlaceEditingHelper.html">SafeInPlaceEditingHelper</a>
  
    <li><a href="../SavedReport.html">SavedReport</a>
  
    <li><a href="../SavedReportAutoTitlesController.html">SavedReportAutoTitlesController</a>
  
    <li><a href="../SavedReportsBaseController.html">SavedReportsBaseController</a>
  
    <li><a href="../SavedReportsByCustomerController.html">SavedReportsByCustomerController</a>
  
    <li><a href="../SavedReportsByProjectController.html">SavedReportsByProjectController</a>
  
    <li><a href="../SavedReportsByTaskController.html">SavedReportsByTaskController</a>
  
    <li><a href="../SavedReportsByUserController.html">SavedReportsByUserController</a>
  
    <li><a href="../SavedReportsController.html">SavedReportsController</a>
  
    <li><a href="../SavedReportsHelper.html">SavedReportsHelper</a>
  
    <li><a href="../SessionsController.html">SessionsController</a>
  
    <li><a href="../Task.html">Task</a>
  
    <li><a href="../TaskGroup.html">TaskGroup</a>
  
    <li><a href="../TaskImport.html">TaskImport</a>
  
    <li><a href="../TaskImportsController.html">TaskImportsController</a>
  
    <li><a href="../TaskImportsHelper.html">TaskImportsHelper</a>
  
    <li><a href="../TasksController.html">TasksController</a>
  
    <li><a href="../TasksHelper.html">TasksHelper</a>
  
    <li><a href="../Timesheet.html">Timesheet</a>
  
    <li><a href="../TimesheetRow.html">TimesheetRow</a>
  
    <li><a href="../TimesheetRowsController.html">TimesheetRowsController</a>
  
    <li><a href="../TimesheetRowsHelper.html">TimesheetRowsHelper</a>
  
    <li><a href="../TimesheetsController.html">TimesheetsController</a>
  
    <li><a href="../TimesheetsHelper.html">TimesheetsHelper</a>
  
    <li><a href="../TrackRecordSections.html">TrackRecordSections</a>
  
    <li><a href="../TreesController.html">TreesController</a>
  
    <li><a href="../User.html">User</a>
  
    <li><a href="../UsersController.html">UsersController</a>
  
    <li><a href="../UsersHelper.html">UsersHelper</a>
  
    <li><a href="../WorkPacket.html">WorkPacket</a>
  
    <li><a href="../WorkPacketsController.html">WorkPacketsController</a>
  
    <li><a href="../WorkPacketsHelper.html">WorkPacketsHelper</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class TrackRecordReport::ReportCell</h1>

  <div id="description" class="description">
    
<p>Store information about a specific task over a column’s date range.</p>

<p>The object does not store the task or range data since this would be
redundant across potentially numerous instances leading to significant RAM
wastage. Instead:</p>
<ul><li>
<p>The <a href="ReportCell.html">ReportCell</a> objects are stored in a <a
href="ReportRow.html">ReportRow</a> “cells” array. The array indices
correspond directly to array indices of the Report’s “ranges” array,
compiled as the first row of the report gets built.</p>
</li><li>
<p>The ReportRows’ “task” property gives the task object for that row.</p>
</li></ul>

<p>So - to find task and range, you need to know the row index of the <a
href="ReportRow.html">ReportRow</a> and the column index of the <a
href="ReportCell.html">ReportCell</a> this contains.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-user_data" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">user_data</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p><a href="../User.html">User</a> breakdown for this cell</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/track_record_report.rb, line 1112</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>()
  <span class="ruby-keyword">super</span>()
  <span class="ruby-ivar">@user_data</span> = []
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-add_user_data" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_user_data</span><span
            class="method-args">( data )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Add the given <a href="ReportUserData.html">ReportUserData</a> object to
the “@<a href="ReportCell.html#attribute-i-user_data">#user_data</a>” array
and add it to the internal running hourly count.</p>
          

          
          <div class="method-source-code" id="add_user_data-source">
            <pre><span class="ruby-comment"># File lib/track_record_report.rb, line 1120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_user_data</span>( <span class="ruby-identifier">data</span> )
  <span class="ruby-ivar">@user_data</span>.<span class="ruby-identifier">push</span>( <span class="ruby-identifier">data</span> )
  <span class="ruby-identifier">add!</span>( <span class="ruby-identifier">data</span> )
<span class="ruby-keyword">end</span></pre>
          </div><!-- add_user_data-source -->
          
        </div>

        

        
      </div><!-- add_user_data-method -->

    
      <div id="method-i-calculate-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">calculate!</span><span
            class="method-args">( range, committed, not_committed, reportable_user_ids = [] )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Pass a date range, an array of committed work packets sorted by date
descending, an array of not committed work packets sorted by date
descending and an optional user IDs array. Hours are summed for work
packets across the given range. Any work packets falling within the range
are removed from the arrays. Separate totals for each of the users in the
given array are maintained in the @<a
href="ReportCell.html#attribute-i-user_data">#user_data</a> array.</p>
          

          
          <div class="method-source-code" id="calculate-21-source">
            <pre><span class="ruby-comment"># File lib/track_record_report.rb, line 1132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate!</span>( <span class="ruby-identifier">range</span>, <span class="ruby-identifier">committed</span>, <span class="ruby-identifier">not_committed</span>, <span class="ruby-identifier">reportable_user_ids</span> = [] )
  <span class="ruby-comment"># Reset internal calculations and pre-allocate ReportUserData objects for</span>
  <span class="ruby-comment"># each user (if any).</span>

  <span class="ruby-identifier">reset!</span>()
  <span class="ruby-ivar">@user_data</span> = []

  <span class="ruby-identifier">reportable_user_ids</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">user_index</span> <span class="ruby-operator">|</span>
    <span class="ruby-ivar">@user_data</span>[ <span class="ruby-identifier">user_index</span> ]= <span class="ruby-constant">ReportUserData</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Start and the end of the committed packets array. For anything within</span>
  <span class="ruby-comment"># the given range, add the hours to the internal total and add to the</span>
  <span class="ruby-comment"># relevant user</span>

  <span class="ruby-ivar">@committed</span> = <span class="ruby-identifier">sum</span>(
    <span class="ruby-identifier">range</span>,
    <span class="ruby-identifier">committed</span>,
    <span class="ruby-identifier">reportable_user_ids</span>,
    <span class="ruby-value">:add_committed_hours</span>
  )

  <span class="ruby-comment"># Same again, but for not committed hours.</span>

  <span class="ruby-ivar">@not_committed</span> = <span class="ruby-identifier">sum</span>(
    <span class="ruby-identifier">range</span>,
    <span class="ruby-identifier">not_committed</span>,
    <span class="ruby-identifier">reportable_user_ids</span>,
    <span class="ruby-value">:add_not_committed_hours</span>
  )
<span class="ruby-keyword">end</span></pre>
          </div><!-- calculate-21-source -->
          
        </div>

        

        
      </div><!-- calculate-21-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

