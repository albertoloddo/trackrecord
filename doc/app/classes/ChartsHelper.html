<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ChartsHelper</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ChartsHelper</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/helpers/charts_helper_rb.html">
                app/helpers/charts_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <table>
<tr><td valign="top">File:</td><td>charts_helper.rb

</td></tr>
<tr><td valign="top">(C):</td><td>Hipposoft 2008, 2009

</td></tr>
<tr><td valign="top">Purpose:</td><td>Help views use the charts controller.

</td></tr>
</table>
<hr size="10"></hr><pre>
          11-Mar-2008 (ADH): Created.
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000170">charthelp_image</a>&nbsp;&nbsp;
      <a href="#M000169">charthelp_image_url</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">CHART_TYPE_PIE</td>
          <td>=</td>
          <td class="context-item-value">0</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000170" class="method-detail">
        <a name="M000170"></a>

        <div class="method-heading">
          <a href="#M000170" class="method-signature">
          <span class="method-name">charthelp_image</span><span class="method-args">( duration, committed, not_committed, width, height )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return an HTML &lt;img&gt; tag which includes a Gruff-generated pie chart
summarising a task based on the given duration, committed and not committed
hours, using the given width and height (pixels). The height of the
generated image tends to depend on Gruff, so it&#8216;s only given the
width. If you wish to have the image appear undistorted, generate one at
the given width, check its actual height then use that value from then on.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000170-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000170-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/charts_helper.rb, line 46</span>
46:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">charthelp_image</span>( <span class="ruby-identifier">duration</span>, <span class="ruby-identifier">committed</span>, <span class="ruby-identifier">not_committed</span>, <span class="ruby-identifier">width</span>, <span class="ruby-identifier">height</span> )
47:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">image_tag</span>(
48:       <span class="ruby-identifier">charthelp_image_url</span>( <span class="ruby-identifier">duration</span>, <span class="ruby-identifier">committed</span>, <span class="ruby-identifier">not_committed</span>, <span class="ruby-identifier">width</span> ),
49:       {
50:         <span class="ruby-identifier">:size</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{ width }x#{ height }&quot;</span>,
51:         <span class="ruby-identifier">:alt</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Overview&quot;</span>,
52:         <span class="ruby-identifier">:align</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;left&quot;</span>
53:       }
54:     )
55:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000169" class="method-detail">
        <a name="M000169"></a>

        <div class="method-heading">
          <a href="#M000169" class="method-signature">
          <span class="method-name">charthelp_image_url</span><span class="method-args">( duration, committed, not_committed, width )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return an image URL which will resolve to a pie chart summarising a task
based on the given duration, committed and not committed hours, using the
given width (pixels).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000169-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000169-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/charts_helper.rb, line 18</span>
18:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">charthelp_image_url</span>( <span class="ruby-identifier">duration</span>, <span class="ruby-identifier">committed</span>, <span class="ruby-identifier">not_committed</span>, <span class="ruby-identifier">width</span> )
19: 
20:     <span class="ruby-comment cmt"># Rails routes don't like &quot;.&quot; appearing in the middle of a URL.</span>
21:     <span class="ruby-comment cmt"># &quot;CGI.escape()&quot; doesn't touch them, so change them manually to</span>
22:     <span class="ruby-comment cmt"># underscores for maximum inoffensiveness! The controller changes</span>
23:     <span class="ruby-comment cmt"># them back.</span>
24: 
25:     <span class="ruby-identifier">duration</span>      = <span class="ruby-identifier">duration</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>( <span class="ruby-value str">'.'</span>, <span class="ruby-value str">'_'</span> )
26:     <span class="ruby-identifier">committed</span>     = <span class="ruby-identifier">committed</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>( <span class="ruby-value str">'.'</span>, <span class="ruby-value str">'_'</span> )
27:     <span class="ruby-identifier">not_committed</span> = <span class="ruby-identifier">not_committed</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>( <span class="ruby-value str">'.'</span>, <span class="ruby-value str">'_'</span> )
28: 
29:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">chart_url</span>(
30:       <span class="ruby-constant">CHART_TYPE_PIE</span>,
31:       <span class="ruby-identifier">:width</span>         =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">width</span>,
32:       <span class="ruby-identifier">:duration</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">duration</span>,
33:       <span class="ruby-identifier">:committed</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">committed</span>,
34:       <span class="ruby-identifier">:not_committed</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">not_committed</span>
35:     )
36:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>