<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ApplicationHelper</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ApplicationHelper</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/helpers/application_helper_rb.html">
                app/helpers/application_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <table>
<tr><td valign="top">File:</td><td>application_helper.rb

</td></tr>
<tr><td valign="top">(C):</td><td>Hipposoft 2008, 2009

</td></tr>
<tr><td valign="top">Purpose:</td><td>Standard Rails application helper.

</td></tr>
</table>
<hr size="10"></hr><pre>
          24-Dec-2007 (ADH): Created.
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000188">apphelp_boolean</a>&nbsp;&nbsp;
      <a href="#M000197">apphelp_collection_select</a>&nbsp;&nbsp;
      <a href="#M000191">apphelp_commit_label</a>&nbsp;&nbsp;
      <a href="#M000204">apphelp_created_at</a>&nbsp;&nbsp;
      <a href="#M000195">apphelp_date</a>&nbsp;&nbsp;
      <a href="#M000196">apphelp_extra_selection_args</a>&nbsp;&nbsp;
      <a href="#M000189">apphelp_flash_messages</a>&nbsp;&nbsp;
      <a href="#M000185">apphelp_h</a>&nbsp;&nbsp;
      <a href="#M000192">apphelp_hours</a>&nbsp;&nbsp;
      <a href="#M000201">apphelp_list_header</a>&nbsp;&nbsp;
      <a href="#M000203">apphelp_list_header_link</a>&nbsp;&nbsp;
      <a href="#M000202">apphelp_list_row</a>&nbsp;&nbsp;
      <a href="#M000200">apphelp_object_list</a>&nbsp;&nbsp;
      <a href="#M000199">apphelp_project_selector</a>&nbsp;&nbsp;
      <a href="#M000198">apphelp_select</a>&nbsp;&nbsp;
      <a href="#M000190">apphelp_sign_or_signed_in</a>&nbsp;&nbsp;
      <a href="#M000187">apphelp_slug</a>&nbsp;&nbsp;
      <a href="#M000194">apphelp_string_hours</a>&nbsp;&nbsp;
      <a href="#M000193">apphelp_terse_hours</a>&nbsp;&nbsp;
      <a href="#M000186">apphelp_title</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="TrackRecordSections.html">TrackRecordSections</a></span>
      </div>
    </div>

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000188" class="method-detail">
        <a name="M000188"></a>

        <div class="method-heading">
          <a href="#M000188" class="method-signature">
          <span class="method-name">apphelp_boolean</span><span class="method-args">( boolean )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return strings &#8216;Yes&#8217; or &#8216;No&#8217; depending on the value
of the given boolean quantity.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000188-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000188-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 90</span>
90:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_boolean</span>( <span class="ruby-identifier">boolean</span> )
91:     <span class="ruby-identifier">boolean</span> <span class="ruby-value">? </span><span class="ruby-value str">'Yes'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'No'</span>
92:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000197" class="method-detail">
        <a name="M000197"></a>

        <div class="method-heading">
          <a href="#M000197" class="method-signature">
          <span class="method-name">apphelp_collection_select</span><span class="method-args">( form, objfield, collection, colsetfield, colseefield, multiple = true )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Run &#8216;collection_select&#8217; for the given form with the given
arguments for the field name of the target object to be updated, the
collection, the field from within that collection to use for the values to
actually set in the target object and the field from within that collection
to use for the values displayed to the user.
</p>
<p>
A sixth optional boolean parameter, defaulting to &#8216;true&#8217;, says
whether or not the selection list should allow multiple selections (for
this, pass &#8216;true&#8217;). The function takes care of working out how
tall to make the selection list (the &#8216;size&#8217; parameter)
internally, which is really the only reason to call here rather than
calling &#8216;collection_select&#8217; directly.
</p>
<p>
Single selection items will include blank entries.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000197-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000197-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 203</span>
203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_collection_select</span>( <span class="ruby-identifier">form</span>, <span class="ruby-identifier">objfield</span>, <span class="ruby-identifier">collection</span>, <span class="ruby-identifier">colsetfield</span>, <span class="ruby-identifier">colseefield</span>, <span class="ruby-identifier">multiple</span> = <span class="ruby-keyword kw">true</span> )
204:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">form</span>.<span class="ruby-identifier">collection_select</span>(
205:       <span class="ruby-identifier">objfield</span>,
206:       <span class="ruby-identifier">collection</span>,
207:       <span class="ruby-identifier">colsetfield</span>,
208:       <span class="ruby-identifier">colseefield</span>,
209:       <span class="ruby-identifier">multiple</span> <span class="ruby-value">? </span>{} <span class="ruby-operator">:</span> { <span class="ruby-identifier">:include_blank</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'None'</span> },
210:       <span class="ruby-identifier">apphelp_extra_selection_args</span>( <span class="ruby-identifier">collection</span>, <span class="ruby-identifier">multiple</span> )
211:     )
212:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000191" class="method-detail">
        <a name="M000191"></a>

        <div class="method-heading">
          <a href="#M000191" class="method-signature">
          <span class="method-name">apphelp_commit_label</span><span class="method-args">( item, active = nil )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Output HTML suitable as a label to show whether or not the given object is
active or otherwise. The second parameter lets you override the given
object and force the generation of an active (pass &#8216;true&#8217;) or
inactive (pass &#8216;false&#8217;) label.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000191-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000191-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_commit_label</span>( <span class="ruby-identifier">item</span>, <span class="ruby-identifier">active</span> = <span class="ruby-keyword kw">nil</span> )
140:     <span class="ruby-identifier">active</span> = <span class="ruby-identifier">item</span>.<span class="ruby-identifier">active</span> <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">active</span>.<span class="ruby-identifier">nil?</span> )
141:     <span class="ruby-identifier">active</span> <span class="ruby-value">? </span><span class="ruby-value str">'&lt;span class=&quot;item_active&quot;&gt;Active&lt;/span&gt;'</span> <span class="ruby-operator">:</span>
142:              <span class="ruby-value str">'&lt;span class=&quot;item_inactive&quot;&gt;Inactive&lt;/span&gt;'</span>
143:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000204" class="method-detail">
        <a name="M000204"></a>

        <div class="method-heading">
          <a href="#M000204" class="method-signature">
          <span class="method-name">apphelp_created_at</span><span class="method-args">( obj )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Column formatting helper for creation dates. Pass an object with a
created_at method. The value returned is used for display.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000204-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000204-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 518</span>
518:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_created_at</span>( <span class="ruby-identifier">obj</span> )
519:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">apphelp_date</span>( <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">created_at</span> )
520:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000195" class="method-detail">
        <a name="M000195"></a>

        <div class="method-heading">
          <a href="#M000195" class="method-signature">
          <span class="method-name">apphelp_date</span><span class="method-args">( date )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Standard date formatting; pass the date to format.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000195-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000195-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 173</span>
173:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_date</span>( <span class="ruby-identifier">date</span> )
174:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">date</span>.<span class="ruby-identifier">strftime</span>( <span class="ruby-value str">'%Y-%m-%d %H:%M:%S'</span> )
175:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000196" class="method-detail">
        <a name="M000196"></a>

        <div class="method-heading">
          <a href="#M000196" class="method-signature">
          <span class="method-name">apphelp_extra_selection_args</span><span class="method-args">( collection, multiple )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return standard extra arguments for selection lists based on a collection
(its size is taken) and &quot;multiple&quot; flag
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000196-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000196-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 184</span>
184:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_extra_selection_args</span>( <span class="ruby-identifier">collection</span>, <span class="ruby-identifier">multiple</span> )
185:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">multiple</span> <span class="ruby-operator">?</span> { <span class="ruby-identifier">:multiple</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:size</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">size</span>, <span class="ruby-value">10</span> ].<span class="ruby-identifier">min</span> } <span class="ruby-operator">:</span> {}
186:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000189" class="method-detail">
        <a name="M000189"></a>

        <div class="method-heading">
          <a href="#M000189" class="method-signature">
          <span class="method-name">apphelp_flash_messages</span><span class="method-args">( indent = '' )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return any flash messages using class names prefixed by &quot;flash_&quot;,
with the suffix being the key name from the flash hash. The messages are
wrapped by a DIV with class &#8216;messages&#8217;. If there are no
messages to show, an empty string is returned. Optionally pass an indent
string to add at the front of any non-empty line of output. If a non-empty
result is returned, note that it will be terminated by &quot;\n\n&quot;.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000189-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000189-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_flash_messages</span>( <span class="ruby-identifier">indent</span> = <span class="ruby-value str">''</span> )
102:     <span class="ruby-identifier">output</span> = <span class="ruby-value str">''</span>
103: 
104:     <span class="ruby-identifier">flash</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">|</span>
105:       <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;&lt;div class='flash_#{ h( key ) }'&gt;#{ h( flash[ key ] ) }&lt;/div&gt;&quot;</span>
106:     <span class="ruby-keyword kw">end</span>
107: 
108:     <span class="ruby-keyword kw">unless</span> ( <span class="ruby-identifier">output</span>.<span class="ruby-identifier">empty?</span> )
109:       <span class="ruby-identifier">output</span> = <span class="ruby-identifier">indent</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">content_tag</span>( <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">output</span>, { <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'messages'</span> } ) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n\n&quot;</span>
110:     <span class="ruby-keyword kw">end</span>
111: 
112:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">output</span>
113:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000185" class="method-detail">
        <a name="M000185"></a>

        <div class="method-heading">
          <a href="#M000185" class="method-signature">
          <span class="method-name">apphelp_h</span><span class="method-args">( value )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Equivalent of &#8216;h()&#8217;, but returns &#8217;-&#8217; for nil or
empty strings.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000185-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000185-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 20</span>
20:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_h</span>( <span class="ruby-identifier">value</span> )
21:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">'-'</span> <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span> )
22:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span>( <span class="ruby-identifier">value</span> )
23:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000192" class="method-detail">
        <a name="M000192"></a>

        <div class="method-heading">
          <a href="#M000192" class="method-signature">
          <span class="method-name">apphelp_hours</span><span class="method-args">( hours )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Simple wrapper over &#8216;pluralize&#8217; to return a string indicating a
number of hours mathematically rounded to two decimal places.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000192-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000192-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 148</span>
148:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_hours</span>( <span class="ruby-identifier">hours</span> )
149:     <span class="ruby-identifier">pluralize</span>( <span class="ruby-identifier">hours</span>.<span class="ruby-identifier">precision</span>( <span class="ruby-value">2</span> ), <span class="ruby-value str">'hour'</span> )
150:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000201" class="method-detail">
        <a name="M000201"></a>

        <div class="method-heading">
          <a href="#M000201" class="method-signature">
          <span class="method-name">apphelp_list_header</span><span class="method-args">( structure, model, actions_method )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Construct a header row for a list table, returning HTML for it. The table
outer definition must be included externally. To define the row contents,
pass an array of hashes. Each array entry corresponds to a cell in the row,
built in order of appearance in the array. The hashes can contain optional
property &quot;header_align&quot; to override the row alignment for that
cell; the property&#8216;s value is used directly as a TH &quot;align&quot;
value.
</p>
<p>
Each hash must include property &quot;header_text&quot; giving the heading
text for that cell. The text is placed in the cell wrapped up in an HTML
link which will re-fetch the list view with modified search parameters. To
achieve this requires a second mandatory input parameter, which is the name
of the model being listed, singular, lower case (e.g. &quot;user&quot;).
</p>
<p>
A blank header cell is placed at the end of the row to appear above an
actions column if the third mandatory parameter is non-nil. If nil, no room
is made for an actions column.
</p>
<p>
See also <a href="ApplicationHelper.html#M000202">apphelp_list_row</a>.
</p>
<p>
E.g.:
</p>
<pre>
  apphelp_list_header(
    [
      { :header_text =&gt; 'User name' },
      { :header_text =&gt; 'Age', :header_align =&gt; 'center' },
      { :header_text =&gt; 'E-mail address' }
    ],
    'users_path'
  )
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000201-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000201-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 332</span>
332:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_list_header</span>( <span class="ruby-identifier">structure</span>, <span class="ruby-identifier">model</span>, <span class="ruby-identifier">actions_method</span> )
333:     <span class="ruby-identifier">output</span> = <span class="ruby-value str">&quot;        &lt;tr valign=\&quot;middle\&quot; align=\&quot;left\&quot; class=\&quot;info\&quot;&gt;\n&quot;</span>
334: 
335:     <span class="ruby-identifier">structure</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">index</span> <span class="ruby-operator">|</span>
336:       <span class="ruby-identifier">entry</span>      = <span class="ruby-identifier">structure</span>[ <span class="ruby-identifier">index</span> ]
337:       <span class="ruby-identifier">align</span>      = <span class="ruby-identifier">entry</span>[ <span class="ruby-identifier">:header_align</span> ]
338:       <span class="ruby-identifier">sort_class</span> = <span class="ruby-keyword kw">nil</span>
339: 
340:       <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">params</span>[ <span class="ruby-identifier">:sort</span> ] <span class="ruby-operator">==</span> <span class="ruby-identifier">index</span>.<span class="ruby-identifier">to_s</span> )
341:         <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">params</span>[ <span class="ruby-identifier">:direction</span> ] <span class="ruby-operator">==</span> <span class="ruby-value str">'desc'</span> )
342:           <span class="ruby-identifier">sort_class</span> = <span class="ruby-value str">&quot;sorted_column_desc&quot;</span>
343:         <span class="ruby-keyword kw">else</span>
344:           <span class="ruby-identifier">sort_class</span> = <span class="ruby-value str">&quot;sorted_column_asc&quot;</span>
345:         <span class="ruby-keyword kw">end</span>
346:       <span class="ruby-keyword kw">end</span>
347: 
348:       <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;          &lt;th&quot;</span>
349:       <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; class=\&quot;#{ sort_class }\&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> ( <span class="ruby-identifier">sort_class</span>.<span class="ruby-identifier">nil?</span> )
350: 
351:       <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">align</span>.<span class="ruby-identifier">nil?</span> )
352:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&gt;&quot;</span> <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">align</span>.<span class="ruby-identifier">nil?</span> )
353:       <span class="ruby-keyword kw">else</span>
354:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; align=\&quot;#{ align }\&quot;&gt;&quot;</span>
355:       <span class="ruby-keyword kw">end</span>
356: 
357:       <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">entry</span>[ <span class="ruby-identifier">:value_method</span> ] <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">entry</span>[ <span class="ruby-identifier">:sort_by</span> ] )
358:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">apphelp_list_header_link</span>( <span class="ruby-identifier">model</span>, <span class="ruby-identifier">entry</span>[ <span class="ruby-identifier">:header_text</span> ], <span class="ruby-identifier">index</span> )
359:       <span class="ruby-keyword kw">else</span>
360:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">entry</span>[ <span class="ruby-identifier">:header_text</span> ]
361:       <span class="ruby-keyword kw">end</span>
362: 
363:       <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/th&gt;\n&quot;</span>
364:     <span class="ruby-keyword kw">end</span>
365: 
366:     <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;          &lt;th width=\&quot;1\&quot;&gt;&amp;nbsp;&lt;/th&gt;\n&quot;</span> <span class="ruby-keyword kw">unless</span> ( <span class="ruby-identifier">actions_method</span>.<span class="ruby-identifier">nil?</span> )
367:     <span class="ruby-keyword kw">return</span> ( <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;        &lt;/tr&gt;\n&quot;</span> )
368:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000203" class="method-detail">
        <a name="M000203"></a>

        <div class="method-heading">
          <a href="#M000203" class="method-signature">
          <span class="method-name">apphelp_list_header_link</span><span class="method-args">( model, text, index )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Support function for <a
href="ApplicationHelper.html#M000201">apphelp_list_header</a>.
</p>
<p>
Returns an HTML link based on a URL acquired by calling
&quot;models_path&quot;, where &quot;models&quot; comes from pluralizing
the given lower case singular model name, wrapping the given link text
(which will be protected in turn with a call to &quot;h(&#8230;)&quot;).
Pass also the index of the column in the list structure. Generates a link
with query string attempting to maintain or set correctly the sort and
pagination parameters based on the current request parameters and given
column index.
</p>
<p>
E.g.:
</p>
<pre>
  apphelp_list_header_link( 'users_path', 'User name', 0 )
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000203-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000203-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 481</span>
481:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_list_header_link</span>( <span class="ruby-identifier">model</span>, <span class="ruby-identifier">text</span>, <span class="ruby-identifier">index</span> )
482: 
483:     <span class="ruby-comment cmt"># When generating the link, there is no point maintaining the</span>
484:     <span class="ruby-comment cmt"># current page number - reset to 1. Do maintain the entries count.</span>
485: 
486:     <span class="ruby-identifier">entries</span>   = <span class="ruby-value str">''</span>
487:     <span class="ruby-identifier">entries</span>   = <span class="ruby-node">&quot;&amp;entries=#{ params[ :entries ] }&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[ <span class="ruby-identifier">:entries</span> ]
488: 
489:     <span class="ruby-comment cmt"># For the direction, if the current sort index in 'params' matches</span>
490:     <span class="ruby-comment cmt"># the index for this column, the link should be used to toggle the</span>
491:     <span class="ruby-comment cmt"># sort order; if currently on 'asc', write 'desc' and vice versa.</span>
492:     <span class="ruby-comment cmt"># If building a link for a different column, default to 'asc'.</span>
493: 
494:     <span class="ruby-identifier">direction</span> = <span class="ruby-value str">''</span>
495: 
496:     <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">params</span>[ <span class="ruby-identifier">:sort</span> ] <span class="ruby-operator">==</span> <span class="ruby-identifier">index</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[ <span class="ruby-identifier">:direction</span> ] <span class="ruby-operator">==</span> <span class="ruby-value str">'asc'</span> )
497:       <span class="ruby-identifier">direction</span> = <span class="ruby-value str">'&amp;direction=desc'</span>
498:     <span class="ruby-keyword kw">else</span>
499:       <span class="ruby-identifier">direction</span> = <span class="ruby-value str">'&amp;direction=asc'</span>
500:     <span class="ruby-keyword kw">end</span>
501: 
502:     <span class="ruby-comment cmt"># Get the base URL using the caller-supplied method and assemble the</span>
503:     <span class="ruby-comment cmt"># query string after it.</span>
504: 
505:     <span class="ruby-identifier">base</span> = <span class="ruby-identifier">send</span>( <span class="ruby-node">&quot;#{ model.pluralize }_path&quot;</span> )
506:     <span class="ruby-identifier">url</span>  = <span class="ruby-node">&quot;#{ base }?sort=#{ index }#{ direction }&amp;page=1#{ entries }&quot;</span>
507: 
508:     <span class="ruby-keyword kw">unless</span> ( <span class="ruby-identifier">params</span>[ <span class="ruby-identifier">:search</span> ].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">params</span>[ <span class="ruby-identifier">:search</span> ].<span class="ruby-identifier">empty?</span> )
509:       <span class="ruby-identifier">url</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;&amp;search=#{ params[ :search ] }&quot;</span>
510:     <span class="ruby-keyword kw">end</span>
511: 
512:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">link_to</span>( <span class="ruby-identifier">h</span>( <span class="ruby-identifier">text</span> ), <span class="ruby-identifier">url</span> )
513:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000202" class="method-detail">
        <a name="M000202"></a>

        <div class="method-heading">
          <a href="#M000202" class="method-signature">
          <span class="method-name">apphelp_list_row</span><span class="method-args">( structure, item, actions_method )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Construct a body row for a list table, returning HTML for it. The table
outer definition must be included externally. To define the row contents,
pass an array of hashes. Each array entry corresponds to a cell in the row,
built in order of appearance in the array. The hashes can contain optional
property &quot;value_align&quot; to override the row alignment for that
cell; the property&#8216;s value is used directly as a TD &quot;align&quot;
value.
</p>
<p>
Each hash must include property &quot;value_method&quot;. This method will
be invoked on the object given in the second function input parameter and
must return a displayable value for the cell. The output is made safe by
wrapping with a call to &quot;h()&quot; automatically.
</p>
<p>
The third input parameter is the name of a helper method which will be
invoked with the current item as a parameter. It must return the names of
actions permitted for that item, in an array. Actions will be placed in the
final cell on the row as normal links. If the parameter is
&#8216;nil&#8217;, no actions cell will be added onto the rows.
</p>
<p>
Since models can&#8216;t always generate what you want (e.g. they
don&#8216;t have access to helpers, so creating values with
associations&#8217; &quot;show&quot; views linked to is difficult), you can
specify property &quot;value_helper&quot;. This helper method will be
called and passed the item. Its return value is used instead of the value
method, which won&#8216;t be called and can be omitted if a helper is being
used instead. HELPER TEXT IS <b>NOT</b> WRAPPED BY A CALL TO
&quot;h()&quot; - value helpers MUST do this themselves.
</p>
<p>
See also <a href="ApplicationHelper.html#M000201">apphelp_list_header</a>.
</p>
<p>
E.g.:
</p>
<pre>
  apphelp_list_row(
    [
      { :value_method =&gt; 'name' },
      { :value_method =&gt; 'age', :value_align =&gt; 'center' },
      { :value_method =&gt; 'email_as_link' } # Custom method in User model
    ],
    User.find( :first )
  )
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000202-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000202-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 409</span>
409:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_list_row</span>( <span class="ruby-identifier">structure</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">actions_method</span> )
410:     <span class="ruby-identifier">output</span> = <span class="ruby-node">&quot;        &lt;tr valign=\&quot;top\&quot; align=\&quot;left\&quot; class=\&quot;#{ cycle( 'even', 'odd' ) }\&quot;&gt;\n&quot;</span>
411: 
412:     <span class="ruby-comment cmt"># Handle the item columns first</span>
413: 
414:     <span class="ruby-identifier">structure</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">index</span> <span class="ruby-operator">|</span>
415:       <span class="ruby-identifier">entry</span> = <span class="ruby-identifier">structure</span>[ <span class="ruby-identifier">index</span> ]
416:       <span class="ruby-identifier">align</span> = <span class="ruby-identifier">entry</span>[ <span class="ruby-identifier">:value_align</span> ]
417: 
418:       <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;          &lt;td&quot;</span>
419: 
420:       <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">align</span>.<span class="ruby-identifier">nil?</span> )
421:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&gt;&quot;</span> <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">align</span>.<span class="ruby-identifier">nil?</span> )
422:       <span class="ruby-keyword kw">else</span>
423:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; align=\&quot;#{ align }\&quot;&gt;&quot;</span>
424:       <span class="ruby-keyword kw">end</span>
425: 
426:       <span class="ruby-identifier">method</span> = <span class="ruby-identifier">entry</span>[ <span class="ruby-identifier">:value_method</span> ]
427:       <span class="ruby-identifier">helper</span> = <span class="ruby-identifier">entry</span>[ <span class="ruby-identifier">:value_helper</span> ]
428: 
429:       <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">helper</span> )
430:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">send</span>( <span class="ruby-identifier">helper</span>, <span class="ruby-identifier">item</span> )
431:       <span class="ruby-keyword kw">else</span>
432: 
433:         <span class="ruby-comment cmt"># Restricted users can only edit their own account. Since they are not</span>
434:         <span class="ruby-comment cmt"># allowed to list other users on the system, the list view is disabled</span>
435:         <span class="ruby-comment cmt"># for them, so there can never be in-place editors in that case. For</span>
436:         <span class="ruby-comment cmt"># any other object type, restricted users have no edit permission. The</span>
437:         <span class="ruby-comment cmt"># result? Disable all in-place editors for restricted users.</span>
438: 
439:         <span class="ruby-identifier">in_place</span> = <span class="ruby-identifier">entry</span>[ <span class="ruby-identifier">:value_in_place</span> ] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@current_user</span>.<span class="ruby-identifier">privileged?</span>
440: 
441:         <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">in_place</span> )
442:           <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">safe_in_place_editor_field</span>( <span class="ruby-identifier">item</span>, <span class="ruby-identifier">method</span> )
443:         <span class="ruby-keyword kw">else</span>
444:           <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">h</span>( <span class="ruby-identifier">item</span>.<span class="ruby-identifier">send</span>( <span class="ruby-identifier">method</span> ) )
445:         <span class="ruby-keyword kw">end</span>
446:       <span class="ruby-keyword kw">end</span>
447: 
448:       <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/td&gt;\n&quot;</span>
449:     <span class="ruby-keyword kw">end</span>
450: 
451:     <span class="ruby-comment cmt"># Add the actions cell?</span>
452: 
453:     <span class="ruby-keyword kw">unless</span> ( <span class="ruby-identifier">actions_method</span>.<span class="ruby-identifier">nil?</span> )
454:       <span class="ruby-identifier">actions</span> = <span class="ruby-identifier">send</span>( <span class="ruby-identifier">actions_method</span>, <span class="ruby-identifier">item</span> ) <span class="ruby-operator">||</span> []
455:       <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;          &lt;td class=\&quot;list_actions\&quot; nowrap=\&quot;nowrap\&quot;&gt;\n&quot;</span>
456:       <span class="ruby-identifier">actions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">|</span>
457:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;            &quot;</span>
458:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">link_to</span>( <span class="ruby-identifier">action</span>.<span class="ruby-identifier">humanize</span>, { <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">action</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">id</span> } )
459:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
460:       <span class="ruby-keyword kw">end</span>
461:       <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;          &lt;/td&gt;\n&quot;</span>
462:     <span class="ruby-keyword kw">end</span>
463: 
464:     <span class="ruby-keyword kw">return</span> ( <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;        &lt;/tr&gt;\n&quot;</span> )
465:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000200" class="method-detail">
        <a name="M000200"></a>

        <div class="method-heading">
          <a href="#M000200" class="method-signature">
          <span class="method-name">apphelp_object_list</span><span class="method-args">( objects, field = :title )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return HTML representing a human-readable list of the given objects, as
links to titles for the objects. To list a different field, provide the
field name as a symbol in the optional second parameter.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000200-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000200-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 288</span>
288:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_object_list</span>( <span class="ruby-identifier">objects</span>, <span class="ruby-identifier">field</span> = <span class="ruby-identifier">:title</span> )
289:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">'None'</span> <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">empty?</span> )
290: 
291:     <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">collect!</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">object</span> <span class="ruby-operator">|</span>
292:       <span class="ruby-identifier">link_to</span>( <span class="ruby-identifier">h</span>( <span class="ruby-identifier">object</span>.<span class="ruby-identifier">send</span>( <span class="ruby-identifier">field</span> ) ), <span class="ruby-identifier">object</span> )
293:     <span class="ruby-keyword kw">end</span>
294: 
295:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">join</span>( <span class="ruby-value str">', '</span> )
296:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000199" class="method-detail">
        <a name="M000199"></a>

        <div class="method-heading">
          <a href="#M000199" class="method-signature">
          <span class="method-name">apphelp_project_selector</span><span class="method-args">( select_id, select_name, match, include_none = false )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return HTML suitable for an edit form, providing a grouped list of projects
that can be assigned to something. The list is grouped by customer in
default customer sort order, along with a &#8216;None&#8217; entry for
unassigned projects. Pass an ID for the select list, a name for the select
list, and an ID to match within the list to have one of the entries
selected (or omit for no pre-selected item). Pass an optional fourth
parameter of &quot;true&quot; to include a &quot;none&quot; entry, else
exclude it (exclusion is the default behaviour).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000199-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000199-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 235</span>
235:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_project_selector</span>( <span class="ruby-identifier">select_id</span>, <span class="ruby-identifier">select_name</span>, <span class="ruby-identifier">match</span>, <span class="ruby-identifier">include_none</span> = <span class="ruby-keyword kw">false</span> )
236: 
237:     <span class="ruby-identifier">customers</span> = []
238: 
239:     <span class="ruby-comment cmt"># Add the &quot;none&quot; entry; but of a hack, this... :-(</span>
240: 
241:     <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">include_none</span> )
242:       <span class="ruby-identifier">dummy_project</span>           = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>
243:       <span class="ruby-identifier">dummy_project</span>.<span class="ruby-identifier">id</span>        = <span class="ruby-value str">''</span>
244:       <span class="ruby-identifier">dummy_project</span>.<span class="ruby-identifier">title</span>     = <span class="ruby-value str">'None'</span>
245: 
246:       <span class="ruby-identifier">dummy_customer</span>          = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">new</span>
247:       <span class="ruby-identifier">dummy_customer</span>.<span class="ruby-identifier">id</span>       = <span class="ruby-value str">''</span>
248:       <span class="ruby-identifier">dummy_customer</span>.<span class="ruby-identifier">title</span>    = <span class="ruby-value str">'None'</span>
249:       <span class="ruby-identifier">dummy_customer</span>.<span class="ruby-identifier">projects</span> = [ <span class="ruby-identifier">dummy_project</span> ]
250: 
251:       <span class="ruby-identifier">customers</span>.<span class="ruby-identifier">push</span>( <span class="ruby-identifier">dummy_customer</span> )
252:     <span class="ruby-keyword kw">end</span>
253: 
254:     <span class="ruby-comment cmt"># Create a dummy customer for the unassigned projects.</span>
255: 
256:     <span class="ruby-identifier">dummy_customer</span>          = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">new</span>
257:     <span class="ruby-identifier">dummy_customer</span>.<span class="ruby-identifier">title</span>    = <span class="ruby-value str">'No assigned customer'</span>
258:     <span class="ruby-identifier">dummy_customer</span>.<span class="ruby-identifier">projects</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">active</span>.<span class="ruby-identifier">unassigned</span>
259: 
260:     <span class="ruby-identifier">customers</span>.<span class="ruby-identifier">push</span>( <span class="ruby-identifier">dummy_customer</span> ) <span class="ruby-keyword kw">unless</span> ( <span class="ruby-identifier">dummy_customer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span> )
261: 
262:     <span class="ruby-comment cmt"># Find all customers and loop through, adding those that have at least</span>
263:     <span class="ruby-comment cmt"># one assigned project to the 'customers' array.</span>
264: 
265:     <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">active</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">customer</span> <span class="ruby-operator">|</span>
266:       <span class="ruby-identifier">customers</span>.<span class="ruby-identifier">push</span>( <span class="ruby-identifier">customer</span> ) <span class="ruby-keyword kw">unless</span> ( <span class="ruby-identifier">customer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">active</span>.<span class="ruby-identifier">count</span>.<span class="ruby-identifier">zero?</span> )
267:     <span class="ruby-keyword kw">end</span>
268: 
269:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">'There are no active projects.'</span> <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">customers</span>.<span class="ruby-identifier">empty?</span> )
270: 
271:     <span class="ruby-identifier">data</span> = <span class="ruby-node">&quot;&lt;select id=\&quot;#{ select_id }\&quot; name=\&quot;#{ select_name }\&quot;&gt;&quot;</span>
272:     <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">option_groups_from_collection_for_select</span>(
273:       <span class="ruby-identifier">customers</span>, <span class="ruby-comment cmt"># Use customers for groups</span>
274:       <span class="ruby-identifier">:projects</span>, <span class="ruby-comment cmt"># A customer's &quot;projects&quot; method returns its project list</span>
275:       <span class="ruby-identifier">:title</span>,    <span class="ruby-comment cmt"># Use the customer title for the group labels</span>
276:       <span class="ruby-identifier">:id</span>,       <span class="ruby-comment cmt"># A project's &quot;id&quot; method returns the value for an option tag</span>
277:       <span class="ruby-identifier">:title</span>,    <span class="ruby-comment cmt"># A project's &quot;title&quot; method is used for the option contents</span>
278:       <span class="ruby-identifier">match</span>      <span class="ruby-comment cmt"># Match this ID for the selected option item</span>
279:     )
280:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'&lt;/select&gt;'</span>
281:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000198" class="method-detail">
        <a name="M000198"></a>

        <div class="method-heading">
          <a href="#M000198" class="method-signature">
          <span class="method-name">apphelp_select</span><span class="method-args">( form, objfield, choices, multiple = true )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
As <a href="ApplicationHelper.html#M000197">apphelp_collection_select</a>,
but runs &#8216;select&#8217; rather than &#8216;collection_select&#8217;.
The parameters are adjusted accordingly.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000198-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000198-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 217</span>
217:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_select</span>( <span class="ruby-identifier">form</span>, <span class="ruby-identifier">objfield</span>, <span class="ruby-identifier">choices</span>, <span class="ruby-identifier">multiple</span> = <span class="ruby-keyword kw">true</span> )
218:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">form</span>.<span class="ruby-identifier">select</span>(
219:       <span class="ruby-identifier">objfield</span>,
220:       <span class="ruby-identifier">choices</span>,
221:       {},
222:       <span class="ruby-identifier">apphelp_extra_selection_args</span>( <span class="ruby-identifier">choices</span>, <span class="ruby-identifier">multiple</span> )
223:     )
224:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000190" class="method-detail">
        <a name="M000190"></a>

        <div class="method-heading">
          <a href="#M000190" class="method-signature">
          <span class="method-name">apphelp_sign_or_signed_in</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return &#8216;sign in&#8217; or &#8216;you are signed in&#8217; text
indicating current status.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000190-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000190-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 118</span>
118:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_sign_or_signed_in</span>
119:     <span class="ruby-keyword kw">if</span> ( <span class="ruby-ivar">@current_user</span> )
120:       <span class="ruby-keyword kw">if</span> ( <span class="ruby-ivar">@current_user</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@current_user</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">empty?</span> )
121:         <span class="ruby-identifier">signinfo</span> = <span class="ruby-value str">'Creating new account'</span>
122:       <span class="ruby-keyword kw">else</span>
123:         <span class="ruby-identifier">signinfo</span> = <span class="ruby-node">&quot;You are signed in as #{ h( @current_user.name ) } &amp;ndash; #{ link_to( 'sign out', signout_path() ) } &quot;</span>
124:       <span class="ruby-keyword kw">end</span>
125:     <span class="ruby-keyword kw">else</span>
126:       <span class="ruby-comment cmt"># The Application Controller forces redirection to the sign-in page</span>
127:       <span class="ruby-comment cmt"># if the user isn't signed in.</span>
128:       <span class="ruby-identifier">signinfo</span> = <span class="ruby-node">&quot;Please #{ link_to( 'sign in', signin_path() ) }&quot;</span>
129:     <span class="ruby-keyword kw">end</span>
130: 
131:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">signinfo</span>
132:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000187" class="method-detail">
        <a name="M000187"></a>

        <div class="method-heading">
          <a href="#M000187" class="method-signature">
          <span class="method-name">apphelp_slug</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return data for the navigation bar (&quot;slug&quot;).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000187-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000187-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 58</span>
58:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_slug</span>
59:     <span class="ruby-identifier">action</span> = <span class="ruby-identifier">h</span>( <span class="ruby-identifier">action_name</span> )
60:     <span class="ruby-identifier">ctname</span> = <span class="ruby-identifier">h</span>( <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">controller_name</span> )
61:     <span class="ruby-identifier">sep</span>    = <span class="ruby-value str">'&amp;nbsp;&amp;raquo;&amp;nbsp;'</span>
62:     <span class="ruby-identifier">slug</span>   = <span class="ruby-identifier">link_to</span>( <span class="ruby-value str">'Home page'</span>, <span class="ruby-identifier">home_path</span>() ) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">sep</span>
63: 
64:     <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">ctname</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'users'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'home'</span> )
65:       <span class="ruby-identifier">slug</span> = <span class="ruby-value str">'Home page'</span>
66:     <span class="ruby-keyword kw">elsif</span> ( <span class="ruby-identifier">ctname</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'sessions'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'new'</span> )
67:       <span class="ruby-identifier">slug</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'Sign in'</span>
68:     <span class="ruby-keyword kw">elsif</span> ( <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'index'</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'list'</span> )
69:       <span class="ruby-identifier">slug</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">apphelp_title</span>()
70:     <span class="ruby-keyword kw">elsif</span> ( <span class="ruby-identifier">ctname</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'reports'</span> )
71:       <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'create'</span> )
72:         <span class="ruby-identifier">slug</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">link_to</span>( <span class="ruby-value str">'Reports'</span>, <span class="ruby-identifier">new_report_path</span>() ) <span class="ruby-operator">&lt;&lt;</span>
73:                 <span class="ruby-identifier">sep</span> <span class="ruby-operator">&lt;&lt;</span>
74:                 <span class="ruby-value str">'Show report'</span>
75:       <span class="ruby-keyword kw">else</span>
76:         <span class="ruby-identifier">slug</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'Reports'</span>
77:       <span class="ruby-keyword kw">end</span>
78:     <span class="ruby-keyword kw">else</span>
79:       <span class="ruby-identifier">slug</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">link_to</span>( <span class="ruby-identifier">ctname</span>.<span class="ruby-identifier">capitalize</span>(), <span class="ruby-identifier">send</span>( <span class="ruby-node">&quot;#{ ctname }_path&quot;</span> ) ) <span class="ruby-operator">&lt;&lt;</span>
80:               <span class="ruby-identifier">sep</span> <span class="ruby-operator">&lt;&lt;</span>
81:               <span class="ruby-identifier">apphelp_title</span>()
82:     <span class="ruby-keyword kw">end</span>
83: 
84:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">slug</span>
85:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000194" class="method-detail">
        <a name="M000194"></a>

        <div class="method-heading">
          <a href="#M000194" class="method-signature">
          <span class="method-name">apphelp_string_hours</span><span class="method-args">( hours, alt_str, empty_str = nil )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Pass a string representation of worked hours or a duration and a string to
show instead of &quot;0.0&quot;, if that&#8216;s the duration/worked hours
value. Optionally, pass in a string to use instead of an empty string,
should the duration/worked hours value be empty itself.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000194-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000194-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 166</span>
166:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_string_hours</span>( <span class="ruby-identifier">hours</span>, <span class="ruby-identifier">alt_str</span>, <span class="ruby-identifier">empty_str</span> = <span class="ruby-keyword kw">nil</span> )
167:     <span class="ruby-keyword kw">return</span> ( <span class="ruby-identifier">empty_str</span> ) <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">hours</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">empty_str</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">empty_str</span>.<span class="ruby-identifier">empty?</span> )
168:     <span class="ruby-keyword kw">return</span> ( <span class="ruby-identifier">hours</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'0.0'</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">alt_str</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">hours</span> )
169:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000193" class="method-detail">
        <a name="M000193"></a>

        <div class="method-heading">
          <a href="#M000193" class="method-signature">
          <span class="method-name">apphelp_terse_hours</span><span class="method-args">( hours, zero_is_blank = false )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Terse hours - precision 2, don&#8216;t show &quot;.0&quot;, no string
suffix. If you want a blank string instead of &quot;0&quot;, pass
&quot;true&quot; in the second parameter.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000193-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000193-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 155</span>
155:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_terse_hours</span>( <span class="ruby-identifier">hours</span>, <span class="ruby-identifier">zero_is_blank</span> = <span class="ruby-keyword kw">false</span> )
156:     <span class="ruby-identifier">hours</span> = <span class="ruby-identifier">hours</span>.<span class="ruby-identifier">precision</span>( <span class="ruby-value">2</span> ).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chomp</span>( <span class="ruby-value str">'0'</span> ).<span class="ruby-identifier">chomp</span>( <span class="ruby-value str">'0'</span> ).<span class="ruby-identifier">chomp</span>( <span class="ruby-value str">'.'</span> )
157:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">''</span> <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">hours</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'0'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">zero_is_blank</span> )
158:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">hours</span>
159:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000186" class="method-detail">
        <a name="M000186"></a>

        <div class="method-heading">
          <a href="#M000186" class="method-signature">
          <span class="method-name">apphelp_title</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return a dynamic title based on the current request action and controller.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000186-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000186-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/application_helper.rb, line 28</span>
28:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apphelp_title</span>
29:     <span class="ruby-identifier">action</span> = <span class="ruby-identifier">h</span>( <span class="ruby-identifier">action_name</span> )
30:     <span class="ruby-identifier">ctname</span> = <span class="ruby-identifier">h</span>( <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">controller_name</span> )
31: 
32:     <span class="ruby-keyword kw">if</span> ( [ <span class="ruby-value str">''</span>, <span class="ruby-value str">'index'</span>, <span class="ruby-value str">'list'</span> ].<span class="ruby-identifier">include?</span>( <span class="ruby-identifier">action</span> ) )
33:       <span class="ruby-identifier">title</span> = <span class="ruby-identifier">ctname</span>.<span class="ruby-identifier">capitalize</span>
34:     <span class="ruby-keyword kw">else</span>
35:       <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'home'</span> )
36:         <span class="ruby-identifier">title</span> = <span class="ruby-value str">'Home page'</span>
37:       <span class="ruby-keyword kw">else</span>
38:         <span class="ruby-identifier">ctname</span> = <span class="ruby-identifier">ctname</span>.<span class="ruby-identifier">singularize</span>()
39: 
40:         <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">ctname</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'user'</span> )
41:           <span class="ruby-identifier">title</span> = <span class="ruby-node">&quot;#{ action.capitalize } account&quot;</span>
42:         <span class="ruby-keyword kw">elsif</span> ( <span class="ruby-identifier">ctname</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'task_import'</span> )
43:           <span class="ruby-identifier">title</span> = <span class="ruby-value str">'Bulk task import'</span>
44:         <span class="ruby-keyword kw">else</span>
45:           <span class="ruby-identifier">title</span> = <span class="ruby-node">&quot;#{ action.capitalize } #{ ctname }&quot;</span>
46:         <span class="ruby-keyword kw">end</span>
47:       <span class="ruby-keyword kw">end</span>
48:     <span class="ruby-keyword kw">end</span>
49: 
50:     <span class="ruby-comment cmt"># Awkward special case</span>
51:     <span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Enter timesheets&quot;</span> <span class="ruby-keyword kw">if</span> ( <span class="ruby-identifier">title</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;New timesheet&quot;</span> )
52: 
53:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">title</span>
54:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>