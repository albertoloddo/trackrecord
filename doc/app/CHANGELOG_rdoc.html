<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>CHANGELOG - TrackRecord</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body class="file">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./CHANGELOG_rdoc.html">CHANGELOG</a>
  
    <li class="file"><a href="./README_rdoc.html">README</a>
  
    <li class="file"><a href="./doc/README_FOR_APP_rdoc.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./TrackRecordReport.html">TrackRecordReport</a>
  
    <li><a href="./TrackRecordReport/Calculator.html">TrackRecordReport::Calculator</a>
  
    <li><a href="./TrackRecordReport/CalculatorWithUsers.html">TrackRecordReport::CalculatorWithUsers</a>
  
    <li><a href="./TrackRecordReport/Cell.html">TrackRecordReport::Cell</a>
  
    <li><a href="./TrackRecordReport/Report.html">TrackRecordReport::Report</a>
  
    <li><a href="./TrackRecordReport/Row.html">TrackRecordReport::Row</a>
  
    <li><a href="./TrackRecordReport/Section.html">TrackRecordReport::Section</a>
  
    <li><a href="./TrackRecordSections.html">TrackRecordSections</a>
  
    <li><a href="./TrackRecordSections/Group.html">TrackRecordSections::Group</a>
  
    <li><a href="./TrackRecordSections/GroupMixin.html">TrackRecordSections::GroupMixin</a>
  
    <li><a href="./TrackRecordSections/Section.html">TrackRecordSections::Section</a>
  
    <li><a href="./TrackRecordSections/SectionMixin.html">TrackRecordSections::SectionMixin</a>
  
    <li><a href="./TrackRecordSections/Sections.html">TrackRecordSections::Sections</a>
  
    <li><a href="./TrackRecordSections/SectionsMixin.html">TrackRecordSections::SectionsMixin</a>
  
    <li><a href="./ReportsHelper.html">ReportsHelper</a>
  
    <li><a href="./ReportsHelper/ReportMonth.html">ReportsHelper::ReportMonth</a>
  
    <li><a href="./ReportsHelper/ReportWeek.html">ReportsHelper::ReportWeek</a>
  
    <li><a href="./ReportsHelper/ReportYear.html">ReportsHelper::ReportYear</a>
  
    <li><a href="./QuietLeightbox.html">QuietLeightbox</a>
  
    <li><a href="./QuietLeightbox/ClassMethods.html">QuietLeightbox::ClassMethods</a>
  
    <li><a href="./QuietLeightbox/QuietLeightboxHelper.html">QuietLeightbox::QuietLeightboxHelper</a>
  
    <li><a href="./QuietPrototype.html">QuietPrototype</a>
  
    <li><a href="./QuietPrototype/ClassMethods.html">QuietPrototype::ClassMethods</a>
  
    <li><a href="./QuietPrototype/QuietPrototypeHelper.html">QuietPrototype::QuietPrototypeHelper</a>
  
    <li><a href="./YuiTree.html">YuiTree</a>
  
    <li><a href="./YuiTree/ClassMethods.html">YuiTree::ClassMethods</a>
  
    <li><a href="./YuiTree/YuiTreeHelper.html">YuiTree::YuiTreeHelper</a>
  
    <li><a href="./TrackRecordReportGenerator.html">TrackRecordReportGenerator</a>
  
    <li><a href="./TrackRecordReportGenerator/UkOrgPondCSV.html">TrackRecordReportGenerator::UkOrgPondCSV</a>
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./AuditsController.html">AuditsController</a>
  
    <li><a href="./AuditsHelper.html">AuditsHelper</a>
  
    <li><a href="./ChartsController.html">ChartsController</a>
  
    <li><a href="./ChartsHelper.html">ChartsHelper</a>
  
    <li><a href="./ControlPanel.html">ControlPanel</a>
  
    <li><a href="./ControlPanelsController.html">ControlPanelsController</a>
  
    <li><a href="./Customer.html">Customer</a>
  
    <li><a href="./CustomersController.html">CustomersController</a>
  
    <li><a href="./CustomersHelper.html">CustomersHelper</a>
  
    <li><a href="./EmailNotifier.html">EmailNotifier</a>
  
    <li><a href="./HelpController.html">HelpController</a>
  
    <li><a href="./HelpHelper.html">HelpHelper</a>
  
    <li><a href="./Project.html">Project</a>
  
    <li><a href="./ProjectsController.html">ProjectsController</a>
  
    <li><a href="./ProjectsHelper.html">ProjectsHelper</a>
  
    <li><a href="./Rangeable.html">Rangeable</a>
  
    <li><a href="./ReportsController.html">ReportsController</a>
  
    <li><a href="./SavedReport.html">SavedReport</a>
  
    <li><a href="./SavedReportAutoTitlesController.html">SavedReportAutoTitlesController</a>
  
    <li><a href="./SavedReportsBaseController.html">SavedReportsBaseController</a>
  
    <li><a href="./SavedReportsByCustomerController.html">SavedReportsByCustomerController</a>
  
    <li><a href="./SavedReportsByProjectController.html">SavedReportsByProjectController</a>
  
    <li><a href="./SavedReportsByTaskController.html">SavedReportsByTaskController</a>
  
    <li><a href="./SavedReportsByUserController.html">SavedReportsByUserController</a>
  
    <li><a href="./SavedReportsController.html">SavedReportsController</a>
  
    <li><a href="./SavedReportsHelper.html">SavedReportsHelper</a>
  
    <li><a href="./SessionsController.html">SessionsController</a>
  
    <li><a href="./SignIn.html">SignIn</a>
  
    <li><a href="./Task.html">Task</a>
  
    <li><a href="./TaskGroup.html">TaskGroup</a>
  
    <li><a href="./TaskImport.html">TaskImport</a>
  
    <li><a href="./TaskImportsController.html">TaskImportsController</a>
  
    <li><a href="./TaskImportsHelper.html">TaskImportsHelper</a>
  
    <li><a href="./TasksController.html">TasksController</a>
  
    <li><a href="./TasksHelper.html">TasksHelper</a>
  
    <li><a href="./Timesheet.html">Timesheet</a>
  
    <li><a href="./TimesheetForceCommit.html">TimesheetForceCommit</a>
  
    <li><a href="./TimesheetForceCommitsController.html">TimesheetForceCommitsController</a>
  
    <li><a href="./TimesheetRow.html">TimesheetRow</a>
  
    <li><a href="./TimesheetRowsController.html">TimesheetRowsController</a>
  
    <li><a href="./TimesheetRowsHelper.html">TimesheetRowsHelper</a>
  
    <li><a href="./TimesheetsController.html">TimesheetsController</a>
  
    <li><a href="./TimesheetsHelper.html">TimesheetsHelper</a>
  
    <li><a href="./TreesController.html">TreesController</a>
  
    <li><a href="./User.html">User</a>
  
    <li><a href="./UsersController.html">UsersController</a>
  
    <li><a href="./UsersHelper.html">UsersHelper</a>
  
    <li><a href="./WorkPacket.html">WorkPacket</a>
  
    <li><a href="./WorkPacketsController.html">WorkPacketsController</a>
  
    <li><a href="./WorkPacketsHelper.html">WorkPacketsHelper</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation" class="description">
  
<h1 id="label-Change+log">Change log</h1>

<h2 id="label-Version+2.31%2C+2014-05-25">Version 2.31, 2014-05-25</h2>

<p>This version has been updated to include Ruby 2.1.2 in the Gemfile, which
is a pretty big change for a minor version number :-) but it&#39;ll run
fine on 1.9.3 or later, as with previous releases. Edit the line near the
top of “Gemfile” to specify your preferred Ruby version if need be.</p>

<p>Please see “<a href="README_rdoc.html">README.rdoc</a>” for information on
installation and upgrades. If updating, run bundle install“ after updating
your sources then migrate your data with ”rake db:migrate“; Rails 3.2.18 is
required by this update as it include important security fixes.</p>

<p>Otherwise, this is a minor bug fix release, fixing the following:</p>
<ul><li>
<p>JavaScript presence detection failed when using username/password sign-in.</p>
</li><li>
<p>The no-JavaScript version of the timesheet editor&#39;s “Add tasks to
timesheet” feature didn&#39;t work.</p>
</li></ul>

<p>Additional test coverage is included to catch the faults including new use
of Poltergeist/PhantomJS to run automated integrated tests over parts of
the user interface that use JavaScript. As ever, there is far more work to
do here, but it&#39;s a good start.</p>

<h2 id="label-Version+2.30%2C+2014-04-04">Version 2.30, 2014-04-04</h2>

<p>Please see “<a href="README_rdoc.html">README.rdoc</a>” for information on
installation and upgrades. If updating, run bundle install“ after updating
your sources then migrate your data with ”rake db:migrate“.</p>

<p>A while ago, a major OpenID provider shut down its ID service. Although
other providers still exist - e.g. Google account holders have an OpenID,
even if they don&#39;t realise it - OpenID has struggled to gain widespread
adoption and finding an easy-to-use provider with a clear indication of
your actual ID can be a struggle.</p>

<p>Accordingly, TrackRecord now offers a more traditional sign-in option based
on e-mail address and password. For administrators, the process is:</p>
<ul><li>
<p>At first-time startup of a new installation, you get to choose either an
OpenID for your new admin account, or provide an e-mail address and
password which is used for subsequent sign-in, or you can even provide both
and use either to sign in later.</p>
</li><li>
<p>When someone new needs to use the system, the administrator creates their
user account as normal. Either that user tells the admin what OpenID they
want, or the admin assigns a temporary password to the new account, or
both; the admin then tells the new user about the password (if that&#39;s
been chosen). When the user signs in, they&#39;ll be asked to reset the
temporary password to a permanent one that only they know. Adminstrators
can actually change this - though it isn&#39;t recommended - by deselecting
the “must change password on sign-in” option when creating the new user
account. Administrators can also re-set this option for existing users
should they need to re-issue a password (maybe the user forgot theirs), or
should they want the user to choose another password.</p>
</li><li>
<p>From the normal user perspective, the user can sign in with their OpenID if
they gave one to the administrator, and/or their e-mail address and
password. As per the above, they may be asked to change that the first time
they sign in, or if the administrator had subsequently turned back on the
“must change password” flag on their account.</p>
</li></ul>

<p>In TrackRecord, the process is always one wherein the administrator creates
accounts for new users. Accordingly, the usual process of password reset
messages, “forgotten my password” systems and so-on are not provided; a
user who had forgotten their access details would contact the administrator
who could issue a new temporary password by editing the user&#39;s account.
The control over access management is primarily in the hands of the admin,
not all other users of the system.</p>

<p>Security is provided via rails-bcrypt and uses salted, encrypted storage.
This is fairly secure; if you are unfortunate enough to have your database
compromised and its contents downloaded by a miscreant, they are unlikely
to be able to determine the unencrypted value of any password. It would
still be necessary to inform all users of such a breach so they could make
informed decisions about what to do with other web sites should they have
used the same password anywhere else.</p>
<ul><li>
<p><a
href="https://github.com/codahale/bcrypt-ruby/tree/master">github.com/codahale/bcrypt-ruby/tree/master</a></p>
</li></ul>

<p>If you are unsure about detection of, mitigation of, or handling of
security breaches when running a server, please spend some time Googling
around the issue so that you can have confidence your provided service.</p>

<h3 id="label-Other+notable+changes">Other notable changes</h3>
<ul><li>
<p>The sign-in/sign-up process has been cleaned up with some dead code
removal, bug fixes in e-mail sending, lots of improvements in <a
href="User.html">User</a> model validation and so-on. Basically, a general
overhaul.</p>
</li><li>
<p>Removal of some unncessary configuration items, related to continued
extension of internationalisation through “config/locales…”, though a great
deal of work is still to be done here with many hard-coded strings
throughout the application.</p>
</li><li>
<p>Improved indication of errant fields in forms.</p>
</li><li>
<p>Fewer places where links might accidentally be shown to users that lead to
a “not authorised” response.</p>
</li></ul>

<h2 id="label-Version+2.26%2C+2014-03-20">Version 2.26, 2014-03-20</h2>

<p>Please see “<a href="README_rdoc.html">README.rdoc</a>” for vital
information on installation, upgrading from an earlier version, database
requirements and how to run the built in test suite that helps verify your
database&#39;s suitability for TrackRecord.</p>

<p>This release is a small update that adds a convenience feature to create a
new first task for a project, at the same time a project is made. A similar
extension has been added when creating customers too; a new first project
can be made at the same time. This is intentionally a simple feature that
only requires a task or project title and uses default values for the rest
of the item, which you can edit later if necessary.</p>

<p>Other maintenance related changes:</p>
<ul><li>
<p>This release uses the new “Gemified” Safe In Place Editor code, now
available on RubyGems. You must run “bundle install” if you&#39;ve upgraded
from an earlier release. Due to important security patches, Rails 3.2.17 is
also required. The PG gem for PostgreSQL users needs to be at 0.17.1 or
later. Gemfile requrements for “calendar_date_select” were inaccurate and
have been fixed and a general “gem update” will mean that several other
updated gems will be included.</p>
</li><li>
<p>Integration tests are being added using Capybara, a gem which has some
quite heavyweight dependencies, including Nokogiri. This may be time
consuming or troublesome to install when you do “bundle install” or “bundle
update”. If you want to avoid this and either not run tests or skip the
integration tests, comment out the “gem &#39;capybara&#39;” line in the
“Gemfile” file before you run “bundle install” or “bundle update”.</p>

<p>A test mode bypass of OpenID authentication has been added for integration
test purposes. It&#39;s only active in test mode.</p>

<p>See the <a href="README_rdoc.html">README.rdoc</a> file for more
information on installing Nokogiri, especially if you get warnings at
run-time about LibXML versions.</p>
</li><li>
<p>The ORGANISATION_NAME configuration constant has been removed; locale files
are now exclusively used for this, rather than half-and-half.</p>
</li><li>
<p>The layout of the confirmation view used when deleting projects has been
improved a little.</p>
</li><li>
<p>There was a small bug fix in the <a href="Timesheet.html">Timesheet</a>
class that might cause a long running server (two years or more with no
restarts) to begin to reject new timesheets as out-of-year-range. A related
test failed once the current year rolled over to 2014; the <a
href="Timesheet.html">Timesheet</a> class computed the allowed range
statically at startup, taking “this year +/- 2”, rather than calculating it
dynamically at each new timesheet save or update, thus taking account of
new accumulating data in the work packets.</p>
</li><li>
<p>Duplicated locale data for the Will Paginate gem has been resolved in the
locale files.</p>
</li><li>
<p>Documentation has been updated with better generation incorporating both <a
href="README_rdoc.html">README.rdoc</a> and renamed-for-GitHub <a
href="doc/README_FOR_APP_rdoc.html">doc/README_FOR_APP.rdoc</a> in a way
that prevents broken links within “doc/app/index.html”. This also-renamed
<a href="CHANGELOG_rdoc.html">CHANGELOG.rdoc</a> file is also included.
Finally, titles are now correct - no more “YOUR_TITLE” text!</p>
</li></ul>

<h2 id="label-Version+2.25%2C+2013-11-29">Version 2.25, 2013-11-29</h2>

<p>Please see “<a href="README_rdoc.html">README.rdoc</a>” for vital
information on installation, upgrading from an earlier version, database
requirements and how to run the built in test suite that helps verify your
database&#39;s suitability for TrackRecord.</p>

<p>Version 2.25 uses the new “Gemified” Safe In Place Editor code, now
available on RubyGems. It&#39;s important to run “bundle install” if you
have upgraded. Rails 3.2.15 is also required.</p>

<h2 id="label-Version+2.24%2C+2013-10-16">Version 2.24, 2013-10-16</h2>

<p>Please see “<a href="README_rdoc.html">README.rdoc</a>” for vital
information on installation, upgrading from an earlier version, database
requirements and how to run the built in test suite that helps verify your
database&#39;s suitability for TrackRecord.</p>

<p>Version 2.24 introduces the following new features:</p>
<ul><li>
<p>Easier to access report modification as requested by Issue #24, requested
by sarev.</p>
</li></ul>

<p>Version 2.24 fixes the following bugs that were found in v2.23:</p>
<ul><li>
<p>The bulk timesheet commit form would raise an error under certain date
conditions.</p>
</li><li>
<p>An in-place title editing issue arising from an incompatibility between
Rails and Prototype.js 1.7&#39;s more strict adherence to HTTP rules on
data encoding has been worked around within the Safe In Place Editor
plugin. This fixes Issue #21, reported by sarev (with thanks).</p>
</li><li>
<p>Saved report shared flags and copying didn&#39;t work as expected for
various user types; essentially the feature was only half implemented. Now
done properly!</p>
</li><li>
<p>In-place editors for saved report titles and share flags are now supported
in the index view.</p>
</li></ul>

<p>There are also various efficiency improvements and areas of code tidying.</p>

<h2 id="label-Version+2.23%2C+2013-09-09">Version 2.23, 2013-09-09</h2>

<p>Please see version 2.20&#39;s change information below for important notes
about database requirements.</p>

<p>Version 2.23 fixes the following bugs that were found in v2.22:</p>
<ul><li>
<p>Fixes Issue #22, reported by Arpel (with thanks).</p>
</li><li>
<p>Fixes billable/non-billable radio selection in report generator (the
reported flag value was the opposite of that intended).</p>
</li></ul>

<h2 id="label-Version+2.22%2C+2013-09-05">Version 2.22, 2013-09-05</h2>

<p>Please see version 2.20&#39;s change information below for details. In
particular, please check the database/PostgreSQL notes therein.</p>

<p>Version 2.22 fixes the following bugs that were found in v2.21:</p>
<ul><li>
<p>Manager-type users couldn&#39;t edit their profile details due to a typing
error (“@f” instead of just “f”).</p>
</li></ul>

<h2 id="label-Version+2.21%2C+2013-08-19">Version 2.21, 2013-08-19</h2>

<p>Please see version 2.20&#39;s change information below for details. In
particular, please check the database/PostgreSQL notes therein.</p>

<p>Version 2.21 fixes the following bugs that were found in v2.20:</p>
<ul><li>
<p>Fixed a helper call-through usage bug in <a
href="ReportsController.html">ReportsController</a> that showed up in a
live deployment. With every new release, <a
href="https://github.com/pond/trackrecord/issues/6">github.com/pond/trackrecord/issues/6</a>
becomes more urgent.</p>
</li><li>
<p>Satisfactory reports performance in that context, thus reduced production
application log level down to normal (not really a bug so much as an
in-passing note!).</p>
</li></ul>

<h2 id="label-Version+2.20%2C+2013-08-16">Version 2.20, 2013-08-16</h2>

<p>Please see the version 2.11 change details later in this file for very
important details about upgrading from an earlier version or installing
anew. If you&#39;re already running version 2.11, there are few extra steps
to take - just update your TrackRecord files with the new release. You then
need to run “bundle install” to get updated required gems.</p>

<p>THIS RELEASE WORKS BEST ON POSTGRESQL. If you are using another database,
please see the HTML documentation in “doc/app/index.html” for details about
other database configurations. TrackRecord should work on other databases,
but report performance will be poor.</p>

<p>Version 2.20 fixes the following bugs that were found in v2.11:</p>
<ul><li>
<p>The report generator was often slower than v2.04, which it was supposed to
improve upon. The new report generator is much faster than both in all
circumstances.</p>

<p>The <a href="TrackRecordReport.html">TrackRecordReport</a> API HAS
NECESSARILY CHANGED AS A RESULT - just after I&#39;d said it would be
stable for report generators…! Hopefully the v2.10/v2.11 series were
sufficiently short lived that nobody wrote code against that API. There was
no other way to improve performance.</p>

<p>The TrackRecordSection API has changed too. See “doc/app/index.html” for
API documentation.</p>

<p>This complete rewrite of the report engine leads to the version number bump
to v2.20. There are no database changes or migrations, so if you are
nervous about the changes, you can always roll back the TrackRecord files
via e.g. Git.</p>
</li><li>
<p>The “copy report” feature now actually copies reports (!).</p>
</li><li>
<p>The list of saved reports uses the correct user ID for URLs in the view (a
technical level fix that users shouldn&#39;t notice much).</p>
</li></ul>

<p>The only user-facing enhancements are the performance improvements
described above.</p>

<h2 id="label-Version+2.11%2C+2013-08-05">Version 2.11, 2013-08-05</h2>

<p>The procedure to upgrade from any v2.x release or to install anew is the
same, though upgraders may already have completed some steps:</p>
<ul><li>
<p>INSTALLING: If you are not using &#39;rvm&#39; to manage your Ruby
environment, I strongly recommend getting that set up, though it&#39;s not
essential. See:</p>

<pre>https://rvm.io</pre>
</li><li>
<p>INSTALLING: If you haven&#39;t already, copy “config/database_blank.yml” as
“config/database.yml” and fill in the details for your database.
TrackRecord is tested on PostgreSQL 8 though others should work too.</p>

<pre>http://www.postgresql.org</pre>
</li><li>
<p>FOR UPGRADING OR INSTALLING v2.11: Update config/production.rb with a path
prefix if necessary. This step is required because of a very long standing
Rails bug.</p>

<p>See the comments above the “config.relative_url_root” line for details.
This is vital for anyone running TrackRecord in a non-root location, even
if you use something like Phusion Passenger and normally expect to need no
such configuration changes.</p>

<pre>https://www.phusionpassenger.com</pre>
</li><li>
<p>FOR UPGRADING OR INSTALLING v2.11: Set up, or update your gem bundle, make
sure your database is up to date and make sure all the static assets
(stylesheets etc.) are precompiled fully:</p>

<pre>bundle install
RAILS_ENV=production rake db:migrate
RAILS_ENV=production rake assets:clean
RAILS_ENV=production bundle exec rake assets:precompile</pre>
</li></ul>

<p>Please do all of the upgrade steps if running any version 2 release prior
to v2.11. If upgrading from version 1, please see the version 2.00 change
log details towards the end of this file.</p>

<p>Version 2.11 of TrackRecord fixes issues with the asset pipeline migration
introduced in version 2.10 and clears up documentation to make installing
and upgrading easier. There are no other changes or fixes.</p>

<h2 id="label-Version+2.10%2C+2013-08-02">Version 2.10, 2013-08-02</h2>

<p>Please see the version 2.00 notes later for information about updating from
version 1. You will need to migrate your data to upgrade from any previous
v2.x release; for example, to migrate the production database, run this
command:</p>

<pre>RAILS_ENV=production rake db:migrate</pre>

<p>Use of the Rails asset pipeline and updated gems, including Rails 3.2.14,
mean you will also need to update your Gem bundle and precompile assets for
production:</p>

<pre>bundle install
RAILS_ENV=production bundle exec rake assets:precompile</pre>

<p>This can be a fraught process and the best I can do is recommend you do web
searches for any of the huge range of problems this process seems prone to
throwing up; but with luck, it&#39;ll just work. IMPORTANT: If you run the
application from a subdirectory rather than the root of your domain, even
if it&#39;s done transparently with Passenger, you have to take extra
steps. See after the change details below for more.</p>

<p>Version 2.10 fixes the following bugs that were found in v2.04:</p>
<ul><li>
<p>Errors made in a timesheet editor grid (e.g. non-numerical hours) would
cause validation to fail correctly, but changes made elsewhere would be
reset when the form was presented back with errors listed. Changes to the
timesheet&#39;s week, description and/or commit flag are now maintained.</p>
</li><li>
<p>Sign-in page updated with new text, fixing outdated links.</p>
</li><li>
<p>A few minor comment typing errors fixed, some HTML validation fixes,
further improvements to internationalisation.</p>
</li><li>
<p>The prototype.js library version is updated to version 1.7.1 (with a very
large number of alterations despite the minor version change).</p>
</li><li>
<p>Moved to using the Rails 3 asset pipeline and fixed up issue related to
this in various plugins. This is a relatively significant change to the
internal organisation of the software and is the main reason for the
TrackRecord version number jump.</p>
</li></ul>

<p>There are the following enhancements:</p>
<ul><li>
<p>Added “relative week” and “relative month” report ranges. You can now for
example set a report to work for “last month” and whenever it is generated,
an appropriate time range is chosen. To support this and additional new
options, the report editor page has been redesigned, hopefully making it
easier and faster to use.</p>
</li><li>
<p>Added a comprehensive report type. This is similar to the by-task standard
report, but adds user breakdowns showing the contribution of selected users
to the total hours for each task at each column of the report. This is in
addition to the by-task and user summary reports.</p>
</li><li>
<p>Saved reports can now be copied, thus acting as report templates.</p>
</li><li>
<p>Extensible report generator mechanism. CSV export now runs as a plugin,
allowing other report manipulation and export mechanisms to be added easily
by third parties.</p>
</li><li>
<p>Inline project creation for bulk task import - users reported often going
through the import process only to realise that they hadn&#39;t added a
project to contain the new tasks. Now both can be done simultaneously.</p>
</li><li>
<p>Administrators can now bulk-commit timesheets over a given date range.</p>
</li><li>
<p>Efficiency improvements by using ActiveRecord::Relation better, avoiding
loading objects into RAM where possible, doing more in the database and
less inside Ruby code.</p>
</li></ul>

<h3 id="label-Deploying+in+a+subdirectory">Deploying in a subdirectory</h3>

<p>Rails asset precompilation is somewhat broken in that it doesn&#39;t
understand applications deployed into subdirectories. If you are not using
Heroku, you can fix this by adding the following into
config/environments/production.rb:</p>

<pre>config.assets.initialize_on_precompile = true
config.relative_url_root = &#39;/&lt;your-app-subdir&gt;&#39;</pre>

<p>…then precompile the assets. If already compiled, delete the folder
&#39;public/assets&#39; then precompile again (see earlier for the
command).</p>

<p>On Heroku, the &#39;initialize&#39; flag must be &#39;false&#39;. The
following link may provide some insight about what to do:</p>

<pre>https://github.com/rails/rails/issues/8941</pre>

<p>I apologise for the inconvenience, but I can&#39;t do much about a bug like
this that&#39;s been in Rails for at least two years, especially now that
(at the time of writing) Rails 4 is out so a Rails 3 fix is even more
unlikely.</p>

<h2 id="label-Version+2.04%2C+2013-07-11">Version 2.04, 2013-07-11</h2>

<p>Please see the version 2.00 notes later for information about updating from
version 1. If upgrading from an earlier version 2, you will need to migrate
your data; for example, to migrate the production database, run this
command:</p>

<pre>RAILS_ENV=production rake db:migrate</pre>

<p>Version 2.04 fixes the following bugs that were found in v2.03:</p>
<ul><li>
<p>Sometimes sorting a timesheet&#39;s rows would not fully sort them - you
would have to sort a second time to get the correct result.</p>
</li><li>
<p>Reordered timesheet rows were not maintained when the timesheet was saved
and used as a template for another week; the row order would be reset.</p>
</li></ul>

<p>There are the following enhancements:</p>
<ul><li>
<p>Timesheets can now be set to auto-sort their contents when rows are added
or removed.</p>
</li><li>
<p>Report titles, if set, are included in all report output for easier
identification.</p>
</li></ul>

<h2 id="label-Version+2.02+and+2.03%2C+2013-04-25">Version 2.02 and 2.03, 2013-04-25</h2>

<p>Please see the version 2.00 notes later for information about updating from
earlier versions.</p>

<p>Version 2.02 fixes the following bugs that were found in v2.01:</p>
<ul><li>
<p>Saved reports can now be deleted. Related code tidied up in a few other
places too.</p>
</li></ul>

<p>Version 2.03 fixes the following bugs that were found in v2.02 on a live
deployment, rather than with test data only:</p>
<ul><li>
<p>Sometimes duplicating a timesheet would keep apparently duplicating one or
more of its rows more than once. This was actually due to an iterator
removing a new timesheet&#39;s default rows, as specified in the user&#39;s
control panel, failing to actually iterate over all objects. It seems an
explicit call to “all” is required on associated collections before “each”
to reliably iterate across all objects (!). A lot of other files have been
updated as a precaution, following the same pattern.</p>
</li><li>
<p>In passing while testing this fix, noticed that attribute protection code
in the <a href="Project.html">Project</a> model was nonsense (copy and
paste error); also, the custom initializer override parameters at creation,
which were only subsequently correctable by editing the instance. This
fault was replicated in <a href="Task.html">Task</a>, <a
href="Project.html">Project</a>, <a href="User.html">User</a> and <a
href="Customer.html">Customer</a> models; fixed in all.</p>
</li></ul>

<h2 id="label-Version+2.01%2C+2013-04-09">Version 2.01, 2013-04-09</h2>

<p>Please see the version 2.00 notes later for information about updating from
earlier version.</p>

<p>This release fixes the following bugs that were found in v2.00:</p>
<ul><li>
<p>Rails 3 converts dates to dates-with-time-and-timezone using the
server&#39;s local timezone rather than UTC as in Rails 2. This could lead
to work packets and timesheets having incorrect cached date-time values.
Editing timesheets would show no issues but reports might be wrong. Noticed
on the Endurance installation when the server automatically changed from
UTC to UTC+1 on April 1st. Fixed.</p>
</li><li>
<p>Administrator users were unable to show saved reports from other users
unless they were shared, even though they could edit them. Administrators
can now see all reports.</p>
</li><li>
<p>Date-based searching in “Manage Timesheets” was broken. Now fixed.</p>
</li></ul>

<h2 id="label-Version+2.00%2C+2013-03-27">Version 2.00, 2013-03-27</h2>

<h3 id="label-Important">Important</h3>

<p>TrackRecord now requires Rails 3.2. It does not run on Rails 2. As a
result, the Ruby version requirements are increased too; you need version
1.9.3 at patch 392 or later. The upgrade instructions below assume that
this is already available.</p>

<p>On the client side, TrackRecord&#39;s views now assume a competent HTML 5,
CSS 2 capable browser is used. It looks best on modern CSS 3 aware browsers
such as recent Safari, Chrome, Opera and Firefox builds. JavaScript is very
strongly recommended but not required, so if you have it turned off in your
browser for any reason or your browser doesn&#39;t support it, TrackRecord
can still be used. Internet Explorer is untested and not officially
supported at any version, though it may work in practice.</p>

<h3 id="label-Upgrading">Upgrading</h3>

<p>To upgrade, first do a full database backup in case anything goes wrong!
Next, unpack TrackRecord somewhere new - don&#39;t copy it on top of an
existing installation. Make any configuration changes you made to your old
copy:</p>
<ul><li>
<p>You can safely just copy over the old &#39;config/database.yml&#39;</p>
</li><li>
<p>…and &#39;config/initializers/email_config.rb&#39;</p>
</li><li>
<p>…and &#39;config/initializers/general_config.rb&#39; files</p>
</li><li>
<p>Possibly port over your e-mail sending configuration for ActionMailer in
&#39;config/environments/production.rb&#39; or &#39;…development.rb&#39; -
see: <a
href="http://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration">guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration</a></p>
</li></ul>

<p>You must also set a secret key in
&#39;config/initializers/secret_token.rb&#39;; this is the equivalent of
the key that in previous versions lived inside
&#39;config/environment.rb&#39;. Comments in the file give detailed
instructions.</p>

<p>The gem dependencies for TrackRecord are all listed in &#39;Gemfile&#39;.
To get these installed, from inside the &#39;trackrecord&#39; directory
(the same directory as this change log file and &#39;Gemfile&#39;), run:</p>

<pre>bundle install</pre>

<p>…to make sure all the relevant gems required by the updated TrackRecord are
present. Now make sure your web server is offline and bring your database
up to date (changing &#39;production&#39; to &#39;development&#39; if being
rightly cautious and testing on a development copy first):</p>

<pre>rake db:migrate RAILS_ENV=production</pre>

<p>Then you should be able to start your web server again. There may be some
server changes needed for Rails 3; consult your web server documentation if
necessary. I recommend using Phusion Passenger, if possible, to serve Rails
application such as TrackRecord.</p>

<p>If you have trouble running &#39;bundle&#39; or the migration, in the first
instance check Google for the error message you see - upgrading Rails and
using bundles is very rarely a pain-free process and the issues will
usually be to do with your computing environment rather than
TrackRecord&#39;s own code.</p>

<h3 id="label-Changes+from+version+1.54">Changes from version 1.54</h3>

<p>See the v1.x branch for more v1.x changes.</p>
<ul><li>
<p>New major version number reflects bump to Rails 3.2 / Ruby 1.9. +
Functionality is an evolution and refinement over TrackRecord v1.x,</p>

<pre>rather than a major overhaul.</pre>
</li><li>
<p>Improved navigation flow throughout. + More consistent and logical
navigation options in some places. + Updated visual theme makes things
easier to read.</p>
</li><li>
<p>Reports can be saved for recollection and modification later. + Can be kept
private or shared to other TrackRecord users. + Sharing URLs are very
simple, since they just refer to a saved.</p>

<pre>database object rather than recording all report parameters.</pre>

<p>+ Old-style long report URLs from TrackRecord v1.5 are supported and</p>

<pre>create a temporary user report.</pre>

<p>+ Quick report generation buttons available when managing or viewing</p>

<pre>customers, projects, tasks and users.</pre>
</li><li>
<p>All list search forms extended to at long last support date ranges.</p>
</li><li>
<p>Improved labels for customers, projects and tasks everywhere - link back to
the original item, with tooltips giving code and description details.</p>
</li><li>
<p>The beginnings of proper internationalisation are in place, though a lot of
messages are not yet run through the language files.</p>
</li><li>
<p>The &#39;gruff&#39; gem is commented out inside &#39;Gemfile&#39; to
prevent annoying dependencies. The graph controller mechanism is still
present but will not work unless you uncomment the gruff line in
&#39;Gemfile&#39; and re-run “bundle install”. It isn&#39;t used by default
anywhere in TrackRecord.</p>
</li><li>
<p>Bugs related to tasks with no project or projects with on customer fixed.</p>
</li><li>
<p>Old-style report URLs are now reliable, rather than leading to 404 errors
on older TrackRecord versions if active tasks had become inactive or vice
versa. Now the active-vs-inactive lists are reassessed at generation time
(and the signed in user&#39;s task permissions taken into account as
usual).</p>
</li></ul>

</div>



<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

